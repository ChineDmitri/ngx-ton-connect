<div class="container">
  <header>
    <h1>{{ title }}</h1>
    <p>Démonstration de la librairie NgxTonConnect</p>
  </header>

  <!-- État de connexion -->
  <section class="status-section">
    <div class="status-card" [class.connected]="isConnected">
      <h2>État de la connexion</h2>
      
      <div class="status-info">
        <div class="status-item">
          <strong>Statut:</strong>
          <span [class]="isConnected ? 'connected' : 'disconnected'">
            {{ isConnected ? 'Connecté' : 'Déconnecté' }}
          </span>
        </div>

        <div class="status-item" *ngIf="isConnected">
          <strong>Wallet:</strong>
          <span>{{ getWalletName() }}</span>
        </div>

        <div class="status-item" *ngIf="isConnected">
          <strong>Adresse:</strong>
          <code>{{ getAccountAddress() }}</code>
        </div>

        <div class="status-item" *ngIf="isConnected">
          <strong>Réseau:</strong>
          <span>{{ getNetworkName() }}</span>
        </div>
      </div>

      <div class="error-message" *ngIf="error()">
        <strong>Erreur:</strong> {{ error() }}
      </div>
    </div>
  </section>

  <!-- Actions -->
  <section class="actions-section">
    <div class="actions-card">
      <h2>Actions</h2>

      <!-- Si pas connecté -->
      <ng-container *ngIf="!isConnected">
        <div class="action-group">
          <h3>Connexion à un wallet</h3>
          
          <div class="wallets-list" *ngIf="availableWallets().length > 0">
            <p>Choisissez un wallet :</p>
            <div class="wallet-buttons">
              <button 
                *ngFor="let wallet of availableWallets(); trackBy: trackWallet"
                (click)="connectWallet(wallet)"
                [disabled]="isConnecting()"
                class="wallet-btn">
                <img [src]="wallet.imageUrl" [alt]="wallet.name" class="wallet-icon">
                {{ wallet.name }}
              </button>
            </div>
          </div>

          <div class="control-buttons">
            <button 
              (click)="connectWallet()"
              [disabled]="isConnecting()"
              class="primary-btn">
              {{ isConnecting() ? 'Connexion...' : 'Connexion automatique' }}
            </button>

            <button 
              (click)="refreshWallets()"
              [disabled]="isConnecting()"
              class="secondary-btn">
              Actualiser les wallets
            </button>
          </div>
        </div>
      </ng-container>

      <!-- Si connecté -->
      <ng-container *ngIf="isConnected">
        <div class="action-group">
          <h3>Opérations</h3>
          <div class="control-buttons">
            <button 
              (click)="sendTestTransaction()"
              class="primary-btn">
              Envoyer transaction test (0.001 TON)
            </button>

            <button 
              (click)="disconnectWallet()"
              class="danger-btn">
              Déconnecter
            </button>
          </div>
        </div>
      </ng-container>
    </div>
  </section>

  <!-- Debug -->
  <section class="debug-section">
    <details>
      <summary>Informations de débogage</summary>
      <pre>{{ getDebugInfo() | json }}</pre>
    </details>
  </section>

  <footer>
    <p>Manifest URL: 
      <a href="https://ton-connect.github.io/demo-dapp-with-wallet/tonconnect-manifest.json" 
         target="_blank" rel="noopener">
        Demo manifest
      </a>
    </p>
  </footer>
</div>
